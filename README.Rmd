---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE, results='hide'}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

![GitHub Logo](TestContR_150w.png)

# TestContR 

The primary goal of TestContR is to select randomized Test groups/individuals and matched them with Control groups/individuals using Euclidian distance. You also have the option to provide a list of test groups/individuals where by you can generate a list of control groups/individuals.


## Example

R contains a crime data set for the all 50 states.  This data set contains data on murder rates, assaults, urban 
population and the occurances of rape.  The TestContR can be used to match states that have similar crime rates.

```{r, results='hide', message=FALSE}
library(tidyverse)
library(TestContR)
```

### match_numeric(): Random Selection of Test and Control groups/individuals
```{r example, warning=FALSE}
df <- datasets::USArrests %>% dplyr::mutate(state = base::row.names(USArrests)) %>%
                               dplyr::select(state, everything())
```

**Expected data set layout with labels/names/id in the first column:**
```{r}
knitr::kable(head(df, n = 10))
```

**Build Test and Control list**
```{r match_numeric}
set.seed(99)
TEST_CONTROL_LIST <- TestContR::match_numeric(df)
```

**Results of random selection option:**
```{r}
knitr::kable(TEST_CONTROL_LIST)
```
<br></br>

***

### Providing a list of Test Groups/Individuals
```{r}
TEST_GRP <- tribble(~'TEST','Colorado','Minnesota','Florida','South Carolina')

```

**Example of data frame for the "test_list" input parameter:**
```{r}
knitr::kable(TEST_GRP)
```


```{r}
set.seed(99)
TEST_CONTROL_LIST <- TestContR::match_numeric(df, test_list = TEST_GRP)
```

**Results for the "test_list" input parameter:**
```{r}
knitr::kable(TEST_CONTROL_LIST)
```

***

### topn_numeric(): Select Top N Controls for a group or individual
Topn_numeric() is used in the situation where you have 1 test group/individual and you are looking for Top N nearest matches using Euclidian distance. 
  - Note: You can provide more than one group, but the function does not remove duplicates in the control list for the more than 1 group or individual.
First, create a dataframe (1x1) as below with the label of the group/individual of interest.
```{r}
test_list <- tribble(~"TEST","Colorado")
```

**Build the list of Top N matches **
Provide the test_list dataframe to the test_list parameter in the function as below.
```{r}
TOPN_CONTROL_LIST <- TestContR::topn_numeric(df, n = 10, test_list = test_list)
```

**Results of Top N selection option:**
```{r}
knitr::kable(TOPN_CONTROL_LIST)
```
<br></br>

***





